<script>
	const design = fanstatic.design;

	return async function(roof, data, url) {
		const panelScope = fanstatic.resolvePanelScope(url);
		const scope = data.scope;
		const photoUrl = data.photo || '';
		const tagFill = `img src="${photoUrl}"`;

		roof.innerHTML = fanstatic.renderJhtm(design.unit({
			figure: {[tagFill]: true},
			subject: [design.div(data.name), design.div(data.title + ', ' + data.company)],
			message: [data.quote],
		}));

		const panelElement = roof.children[0];

		panelElement.dataset.pnPanel = panelScope;
		panelElement.dataset.pnScope = scope;
		panelElement.querySelector(':scope > [data-ds=sub]').dataset.pnRole = 'person';
		panelElement.querySelector(':scope > [data-ds=msg]').dataset.pnRole = 'quote';
		roof.querySelectorAll('[data-ds]').forEach(elem => elem.removeAttribute('[data-ds]'));

		this.controller = {
			panelElement: panelElement,
		};
	}
</script>