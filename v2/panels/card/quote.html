<script>
	const design = fanstatic.design;

	return async function(roof, data, url) {
		const panelScope = data.panelScope || fanstatic.resolvePanelScope(url);
		const photoUrl = data.photo || '';
		const tagFill = `img src="${photoUrl}"`;

		const baseBlockController = await fanstatic.appendPanel(roof, 'block.unit', {
			id: data.id,
			panelScope: panelScope,
			scope: data.scope,
			innerScope: data.innerScope,
			cap: {[tagFill]: true},
			head: [
				design.div({ 'data-pn': 'name' }, data.name), 
				design.wrap([
					design.div({ 'data-pn': 'title' }, data.title),
					design.div({ 'data-pn': 'company' }, data.company)
				])
			],
			body: data.quote || true,
		})

		const panelElement = baseBlockController.panelElement;

		panelElement.querySelector(':scope > [data-pn=body]').dataset.pn = 'quote';

		this.controller = {
			panelElement: panelElement,
		};
	}
</script>