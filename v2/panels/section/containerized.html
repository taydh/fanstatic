<section></section>

<script>
	const design = fanstatic.design;

	return async function (roof, data = {}, url) {
		const panelScope = data.panelScope || fanstatic.resolvePanelScope(url);
		const scope = data.scope = data.scope || panelScope;
		const panelElement = roof.children[0];

		if (data.id) panelElement.id = data.id;

		panelElement.dataset.pnPanel = panelScope;
		panelElement.dataset.pnScope = scope;

		const contentBlockController = await fanstatic.insertPanel(panelElement, 'block.content', 
			Object.assign(data, {
				panelScope: null,
				scope: scope,
			})
		);

		contentBlockController.panelElement.dataset.pn = 'container';

		this.controller = {
			panelElement: panelElement,
			contentBlockController: contentBlockController,
		}
	}
</script>
