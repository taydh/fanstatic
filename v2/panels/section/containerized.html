<section></section>

<script>
	const design = fanstatic.design;
	const controller = {};

	return {
		onload: async function (roof, data = {}, url) {
			const id = data.id || null;
			const scope = data.scope = data.scope || fanstatic.resolvePanelScope(url);
			const panelElement = roof.children[0];

			if (id) panelElement.id = id;

			panelElement.dataset.thmPanel = scope;
			panelElement.innerHTML = fanstatic.renderJhtm([
				design.wrap({data: {thm: { scope:scope, role:'container' }}}, [])
			]);
			
			await fanstatic.insertPanel(panelElement.querySelector('[data-ds=wrap]'), 'block.section-block', {
				scope: scope,
				starts: data.starts || [],
				insides: data.insides || [],
				ends: data.ends || [],
			})

			controller.panelElement = panelElement;
			controller.containerElement = panelElement.children[0];
		},
		controller: controller
	};
</script>
