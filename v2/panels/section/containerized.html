<section></section>

<script>
	const design = fanstatic.design;
	const controller = {};

	return {
		onload: async function (roof, data = {}, url) {
			const id = data.id || null;
			const scope = data.scope = data.scope || fanstatic.resolvePanelScope(url);
			const panelElement = roof.children[0];

			if (id) panelElement.id = id;

			panelElement.dataset.thmPanel = scope;
			panelElement.dataset.thmScope = scope;
			panelElement.innerHTML = fanstatic.renderJhtm([
				design.wrap({'data-thm-role': 'container' }, []),
			]);
			
			const sectionBlockController = await fanstatic.insertPanel(panelElement.querySelector('[data-ds=wrap]'), 'block.section-block', {
				scope: scope,
				starts: data.starts || [],
				inside: data.inside || true,
				ends: data.ends || [],
			});

			controller.panelElement = panelElement;
			controller.containerElement = panelElement.children[0];
			controller.sectionBlockController = sectionBlockController
		},
		controller: controller
	};
</script>
