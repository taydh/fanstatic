<script>
	const design = fanstatic.design;

	return async function (roof, data = {}, url) {
		const panelScope = data.panelScope || fanstatic.resolvePanelScope(url);
		const outerScope = data.scope;
		const innerScope = data.innerScope || outerScope || data.id || panelScope;

		const sectionController = await fanstatic.insertPanel(roof, 'section.containerized', 
			Object.assign(data, {
				panelScope: panelScope,
				scope: outerScope,
				innerScope: innerScope,
			})
		);

		const heroPanel = new fanstatic.panel('block.actionable', Object.assign(data, { scope: outerScope, innerScope: innerScope }));
		const heroTarget = sectionController.contentBlockController.panelElement.querySelector('[data-pn=content]')
		const heroController = await fanstatic.applyContent(heroTarget, heroPanel);

		heroController.panelElement.dataset.pn = 'hero_block';
		sectionController.heroController = heroController;
		
		this.controller = sectionController;

	};
</script>
