<script>
	const design = fanstatic.design;

	return async function (roof, data, url) {
		const panelScope = data.panelScope || fanstatic.resolvePanelScope(url);
		const scope = data.scope || panelScope;
		const stackPanel = (data.stackPanels 
			? data.stackPanels.panel 
			: { stackPanel: { panel: 'block.actionable-block', items: [] }}
		) || 'block.actionable-block';

		const itemControllers = [];
		
		const sectionController = await fanstatic.insertPanel(roof, 'section.containerized-subpanel',
			Object.assign(data, {
				panelScope: panelScope,
				scope: scope,
				subPanel: {
					panel: 'block.stack-blocks',
					data: {
						items: data.stackPanels.items
					}
				}
			})
		);

		sectionController.subPanelController.panelElement.dataset.pn = 'items';

		this.controller = sectionController;
	}
</script>
