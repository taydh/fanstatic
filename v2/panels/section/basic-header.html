<section></section>

<script>
	const design = fanstatic.design;
	const controller = {};

	return {
		onload: function (roof, data, url) {
			const panelScope = fanstatic.resolvePanelScope(url);
			const scope = data.scope || panelScope;
			const panelElement = roof.children[0];
			const identity = data.identity || design.div();
			const navigation = data.navigation || design.div();
			const actions = data.actions || design.div();

			panelElement.dataset.pnPanel = panelScope;
			panelElement.dataset.pnScope = scope;

			panelElement.innerHTML = fanstatic.renderJhtm([
				design.wrap(
					{data: {pn: {role: 'container'}}},
					[ 
						design.wrap({data: {pn: {role: 'identity'}}}, data.identity),
						design.wrap({data: {pn: {role: 'navigation'}}}, data.navigation),
						design.wrap({data: {pn: {role: 'actions'}}}, data.actions),
					],
				)
			]);

			controller.panelElement = panelElement;
			controller.identityElement = panelElement.querySelector(`[data-pn-scope="${scope}"] > [data-pn-role=container] > [data-pn-role=identity]`);
			controller.navigationElement = panelElement.querySelector(`[data-pn-scope="${scope}"] > [data-pn-role=container] > [data-pn-role=navigation]`);;
			controller.actionsElement = panelElement.querySelector(`[data-pn-scope="${scope}"] > [data-pn-role=container] > [data-pn-role=actions]`);;
		},
		controller: controller
	};
</script>
