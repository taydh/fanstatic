<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<base href=""> <!-- relative -->
		<title>Sandbox / Component-Cluster</title>
			
		<script src="https://taydh.github.io/librarium/headjack.js"></script>
		<script>
			var fanstatic_engine_dir = '';
			var fanstatic_base_dir = '';
			let origin = window.location.origin;
			let host_env = null;

			/* 
			 * environment selection 
			 * */

			// relative origin
			[
				'http://localhost/fanstatic3'
			].forEach(path => {
				if (window.location.href.startsWith(path)) origin = path;
			});

			// absolute origin
			if (!host_env) {
				host_env = await fanstatic.fetchJson(origin + '/env.' + origin.replace(/[:/]/g, "_") + '.json');
			}

			document.head.querySelector('base').href = host_env.base_uri; // make base URI absolute
			fanstatic_base_dir = fanstatic_engine_dir = document.baseURI + 'v2'

				const prom = headjack.insertScripts([
					fanstatic_base_dir + '/fanstatic.js?_=1',
				]);
			} //\\//\\
			
			// window.addEventListener('DOMContentLoaded', async function(){
			window.addEventListener('fanstatic.load', async function(){
				Object.assign(fanstatic.settings, {
					base_url: document.baseURI,
					tail_span: '5s',
					log_render: false,
				})

				var res = await fanstatic.insert(
					document.querySelector('main'), // target element 
					fanstatic_base_dir + './component/clusters/clustershifter-basic@1.html'
				)
				
				var cluster = res.scriptOpt.controller
				
				{
					let axisElem = cluster.addAxis('hello', 'Hello')
					axisElem.insertAdjacentHTML('beforeend', '<div>Hello</div>')
				}
				
				cluster.render('TABS');
				cluster.render('COLUMNS');
				cluster.render('SLIDES');
			})
		</script>
	</head>

	<body>
		<main></main>
	</body>
</html>